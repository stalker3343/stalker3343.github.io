(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],a[s]&&p.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var i={},a={app:0},n=[];function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=i,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t._m(0),r("main",[r("section",{staticClass:"options-block"},[r("div",{staticClass:"container options-block__wrap"},[r("div",{staticClass:"options-block__header"},[t._v("Отфильтровать по:")]),r("div",{staticClass:"options-block__options-wrap"},[r("div",{staticClass:"filter"},[r("div",{staticClass:"filter__header"},[t._v("Категории:")]),r("div",{staticClass:"filter__controls"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.categ,expression:"categ"}],staticClass:"filter__select",attrs:{name:"categoris"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.categ=e.target.multiple?r:r[0]},t.changeCateg]}},[r("option",{attrs:{value:""}},[t._v("Все категории")]),r("option",{attrs:{value:"immovable"}},[t._v("Недвижимость")]),r("option",{attrs:{value:"cameras"}},[t._v("Камеры")]),r("option",{attrs:{value:"auto"}},[t._v("Автомобили")]),r("option",{attrs:{value:"laptops"}},[t._v("Ноутбуки")])])])]),r("div",{staticClass:"filter"},[r("div",{staticClass:"filter__header"},[t._v("Цена:")]),r("div",{staticClass:"filter__controls filter-price"},[r("span",[t._v("c")]),r("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.beginPrice,expression:"beginPrice",modifiers:{trim:!0,number:!0}}],staticClass:"filter-price__input",attrs:{type:"number"},domProps:{value:t.beginPrice},on:{input:function(e){e.target.composing||(t.beginPrice=t._n(e.target.value.trim()))},blur:function(e){return t.$forceUpdate()}}}),r("span",[t._v("по")]),r("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.endPrice,expression:"endPrice",modifiers:{trim:!0,number:!0}}],staticClass:"filter-price__input",attrs:{type:"number"},domProps:{value:t.endPrice},on:{input:function(e){e.target.composing||(t.endPrice=t._n(e.target.value.trim()))},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"filter"},[r("div",{staticClass:"filter__header"},[t._v("Избранные:")]),r("div",{staticClass:"filter__controls filter-price"},[t._v("\n              Показать только избранные:\n              "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.showFav,expression:"showFav"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.showFav)?t._i(t.showFav,null)>-1:t.showFav},on:{change:function(e){var r=t.showFav,i=e.target,a=!!i.checked;if(Array.isArray(r)){var n=null,s=t._i(r,n);i.checked?s<0&&(t.showFav=r.concat([n])):s>-1&&(t.showFav=r.slice(0,s).concat(r.slice(s+1)))}else t.showFav=a}}})])])])])]),r("section",{staticClass:"options-block"},[r("div",{staticClass:"container options-block__wrap"},[r("div",{staticClass:"options-block__header"},[t._v("Отсортировать по:")]),r("div",{staticClass:"options-block__options-wrap"},[r("div",{staticClass:"filter"},[r("div",{staticClass:"filter__controls"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.typeSort,expression:"typeSort"}],staticClass:"filter__select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.typeSort=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"rating"}},[t._v("По популярности (рейтинг продавца)")]),r("option",{attrs:{value:"price"}},[t._v("По цене")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.directionSort,expression:"directionSort"}],staticClass:"filter__select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.directionSort=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"down"}},[t._v("По убывания")]),r("option",{attrs:{value:"up"}},[t._v("По возрастанию")])])])])])])]),t.loadSalers?r("section",[r("div",{staticClass:"container"},[r("h1",[t._v(t._s(t.productFiltered.length))])])]):t._e(),r("section",{staticClass:"products"},[t.loadSalers?r("div",{staticClass:"container products__wrapper"},t._l(t.productFiltered,function(e){return r("Product",{key:e.id,attrs:{product:e,salers:t.findSalers(e.relationships.seller)}})}),1):t._e()])])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"header"},[r("div",{staticClass:"container header__wrap"},[r("div",{staticClass:"header__logo"},[t._v("Авито")])])])}],s=(r("c5f6"),r("55dd"),r("7514"),r("ac6a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[r("img",{attrs:{src:t.product.pictures[0]}}),r("div",{staticClass:"product__body"},[r("div",{staticClass:"product__title-wrap"},[r("h3",{staticClass:"product__title"},[t._v(t._s(t.product.title))]),r("div",{staticClass:"product__heart",class:{"product__heart-favourite":t.isFavourite},on:{click:t.togleFavourite}},[r("svg",{attrs:{viewBox:"0 -28 512 512",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:t.svg}})])])]),r("div",{staticClass:"product__price"},[t._v(t._s(t._f("capitalize")(t.product.price)))]),r("div",{staticClass:"product__salers salers"},[r("div",{staticClass:"salers__name"},[t._v(t._s(t.salers.name))]),r("div",{staticClass:"salers__rating"},[t._v(t._s(t.salers.rating))])])])])}),o=[],c=(r("6762"),r("2fdb"),r("20d6"),r("6b54"),r("a481"),{name:"Product",props:["product","salers"],data:function(){return{isFavourite:!1,svg:"M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0"}},created:function(){},filters:{capitalize:function(t){if(t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},methods:{togleFavourite:function(){var t=this;if(this.isFavourite){this.svg="M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0",this.isFavourite=!1;var e=JSON.parse(localStorage.fav),r=e.findIndex(function(e){return e==t.product.id});e.splice(r,1),localStorage.fav=JSON.stringify(e)}else{this.svg="M255 490l-36-36C87 337 0 258 0 161 0 82 61 20 140 20c44 0 87 21 115 54 28-33 71-54 115-54 79 0 140 62 140 141 0 97-87 176-219 293l-36 36z",this.isFavourite=!0;var i=JSON.parse(localStorage.fav);i.push(this.product.id),localStorage.fav=JSON.stringify(i)}}},mounted:function(){if(localStorage.fav){var t=JSON.parse(localStorage.fav);t.includes(this.product.id)?this.isFavourite=!0:this.isFavourite=!1}else localStorage.fav=JSON.stringify([])},watch:{isFavourite:function(t){this.svg=t?"M255 490l-36-36C87 337 0 258 0 161 0 82 61 20 140 20c44 0 87 21 115 54 28-33 71-54 115-54 79 0 140 62 140 141 0 97-87 176-219 293l-36 36z":"M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0"}}}),l=c,u=(r("7cd1"),r("2877")),d=Object(u["a"])(l,s,o,!1,null,null,null),p=d.exports,v={components:{Product:p},data:function(){return{products:[],productsOrig:[],sellers:[],message:"Hello Vue!",categ:"",loadSalers:!1,beginPrice:0,endPrice:0,showFav:!1,typeSort:"price",directionSort:"down"}},mounted:function(){var t=this;fetch("http://avito.dump.academy/products").then(function(t){return t.json()}).then(function(e){t.products=e.data,t.productsOrig=e.data,t.beginPrice=t.getMinPrice(t.products),t.endPrice=t.getMaxPrice(t.products)}),fetch("http://avito.dump.academy/sellers").then(function(t){return t.json()}).then(function(e){t.sellers=e.data,t.loadSalers=!0})},methods:{getMaxPrice:function(t){var e=t.filter(function(t){return t.price}),r=0;return e.forEach(function(t){t["price"]>r&&(r=t["price"])}),r},getMinPrice:function(t){var e=t.filter(function(t){return t.price});return e.reduce(function(t,e){return e.price<t?e.price:t},e[0].price)},changeCateg:function(){var t=this,e=this.products.filter(function(e){return!t.categ||e.category==t.categ});this.beginPrice=this.getMinPrice(e),this.endPrice=this.getMaxPrice(e)},findSalers:function(t){return this.sellers.find(function(e){return e.id==t})}},computed:{productFiltered:{get:function(){var t=this;return this.products.filter(function(e){return!t.categ||e.category==t.categ}).filter(function(e){return!e.price||Number(e.price)>=t.beginPrice&&Number(e.price)<=t.endPrice}).sort(function(e,r){if("rating"==t.typeSort){var i=t.findSalers(e.relationships.seller).rating,a=t.findSalers(r.relationships.seller).rating;return"up"==t.directionSort?i>a?1:-1:i<a?1:-1}if("price"==t.typeSort){var n=e.price,s=r.price;return"up"==t.directionSort?n>s?1:-1:n<s?1:-1}})}},set:function(t){this.products=t}},watch:{showFav:function(t,e){var r=this;if(this.showFav){var i=JSON.parse(localStorage.fav),a=[];i.forEach(function(t){var e=r.productsOrig.find(function(e){return e.id==t});a.push(e)}),this.products=a}else this.products=this.productsOrig}}},f=v,_=(r("5c0b"),Object(u["a"])(f,a,n,!1,null,null,null)),h=_.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var i=r("5e27"),a=r.n(i);a.a},"5e27":function(t,e,r){},"7cd1":function(t,e,r){"use strict";var i=r("eed7"),a=r.n(i);a.a},eed7:function(t,e,r){}});
//# sourceMappingURL=app.233ee800.js.map