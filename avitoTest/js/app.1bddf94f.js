(function(t){function e(e){for(var i,c,n=e[0],o=e[1],l=e[2],p=0,d=[];p<n.length;p++)c=n[p],s[c]&&d.push(s[c][0]),s[c]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,n=1;n<r.length;n++){var o=r[n];0!==s[o]&&(i=!1)}i&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var i={},s={app:0},a=[];function c(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=i,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(r,i,function(e){return t[e]}.bind(null,i));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=o;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t._m(0),r("main",[r("section",{staticClass:"options-block"},[r("b-container",[r("div",{staticClass:"options-block__header"},[t._v("Отфильтровать по:")]),r("b-row",{staticClass:"options-block__options-wrap"},[r("b-col",{staticClass:"filter",attrs:{lg:"3"}},[r("div",{staticClass:"filter__header"},[t._v("Категории:")]),r("div",{staticClass:"filter__controls"},[r("b-form-select",{staticClass:"filter__select",attrs:{name:"categoris"},on:{change:t.changeCateg},model:{value:t.categ,callback:function(e){t.categ=e},expression:"categ"}},[r("option",{attrs:{value:""}},[t._v("Все категории")]),r("option",{attrs:{value:"immovable"}},[t._v("Недвижимость")]),r("option",{attrs:{value:"cameras"}},[t._v("Камеры")]),r("option",{attrs:{value:"auto"}},[t._v("Автомобили")]),r("option",{attrs:{value:"laptops"}},[t._v("Ноутбуки")])])],1)]),r("b-col",{staticClass:"filter",attrs:{lg:"4"}},[r("div",{staticClass:"filter__header"},[t._v("Цена:")]),r("div",{staticClass:"filter__controls filter-price"},[r("div",{staticClass:"filter-price__block"},[r("span",[t._v("c")]),r("b-form-input",{staticClass:"filter-price__input",attrs:{type:"number"},model:{value:t.beginPrice,callback:function(e){t.beginPrice=t._n("string"===typeof e?e.trim():e)},expression:"beginPrice"}})],1),r("div",{staticClass:"filter-price__block"},[r("span",[t._v("по")]),r("b-form-input",{staticClass:"filter-price__input",attrs:{type:"number"},model:{value:t.endPrice,callback:function(e){t.endPrice=t._n("string"===typeof e?e.trim():e)},expression:"endPrice"}})],1)])]),r("b-col",{staticClass:"filter",attrs:{lg:"5"}},[r("div",{staticClass:"filter__header"},[t._v("Избранные:")]),r("div",{staticClass:"filter__controls"},[r("div",[t._v("Показать только избранные:")]),r("b-form-checkbox",{staticClass:"filter__chekbox",model:{value:t.showFav,callback:function(e){t.showFav=e},expression:"showFav"}})],1)])],1)],1)],1),r("section",{staticClass:"options-block"},[r("b-container",{staticClass:"container options-block__wrap"},[r("div",{staticClass:"options-block__header"},[t._v("Отсортировать по:")]),r("div",{staticClass:"options-block__options-wrap"},[r("div",{staticClass:"filter"},[r("div",{staticClass:"filter__controls"},[r("b-form-select",{staticClass:"filter__select",model:{value:t.typeSort,callback:function(e){t.typeSort=e},expression:"typeSort"}},[r("option",{attrs:{value:"rating"}},[t._v("По популярности (рейтинг продавца)")]),r("option",{attrs:{value:"price"}},[t._v("По цене")])]),r("b-form-select",{staticClass:"filter__select",model:{value:t.directionSort,callback:function(e){t.directionSort=e},expression:"directionSort"}},[r("option",{attrs:{value:"down"}},[t._v("По убывания")]),r("option",{attrs:{value:"up"}},[t._v("По возрастанию")])])],1)])])])],1),t.loadSalers?r("section",[r("b-container",{staticClass:"container"},[r("h1",[t._v(t._s(t.productFiltered.length))])])],1):t._e(),r("section",{staticClass:"products"},[t.loadSalers?r("div",{staticClass:"container products__wrapper"},t._l(t.productFiltered,function(e){return r("Product",{key:e.id,attrs:{product:e,salers:t.findSalers(e.relationships.seller)}})}),1):t._e()])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"header"},[r("div",{staticClass:"container header__wrap"},[r("h1",{staticClass:"header__logo"},[t._v("Авито")])])])}],c=(r("c5f6"),r("55dd"),r("7514"),r("ac6a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product"},[r("img",{attrs:{src:t.product.pictures[0]}}),r("div",{staticClass:"product__body"},[r("div",{staticClass:"product__title-wrap"},[r("h3",{staticClass:"product__title"},[t._v(t._s(t.product.title))]),r("div",{staticClass:"product__heart",class:{"product__heart-favourite":t.isFavourite},on:{click:t.togleFavourite}},[r("svg",{attrs:{viewBox:"0 -28 512 512",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:t.svg}})])])]),r("div",{staticClass:"product__price"},[t._v(t._s(t._f("capitalize")(t.product.price)))]),r("div",{staticClass:"product__salers salers"},[r("div",{staticClass:"salers__name"},[t._v(t._s(t.salers.name))]),r("div",{staticClass:"salers__rating"},[t._v(t._s(t.salers.rating))])])])])}),n=[],o=(r("6762"),r("2fdb"),r("20d6"),r("6b54"),r("a481"),{name:"Product",props:["product","salers"],data:function(){return{isFavourite:!1,svg:"M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0"}},created:function(){},filters:{capitalize:function(t){if(t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},methods:{togleFavourite:function(){var t=this;if(this.isFavourite){this.svg="M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0",this.isFavourite=!1;var e=JSON.parse(localStorage.fav),r=e.findIndex(function(e){return e==t.product.id});e.splice(r,1),localStorage.fav=JSON.stringify(e)}else{this.svg="M255 490l-36-36C87 337 0 258 0 161 0 82 61 20 140 20c44 0 87 21 115 54 28-33 71-54 115-54 79 0 140 62 140 141 0 97-87 176-219 293l-36 36z",this.isFavourite=!0;var i=JSON.parse(localStorage.fav);i.push(this.product.id),localStorage.fav=JSON.stringify(i)}}},mounted:function(){if(localStorage.fav){var t=JSON.parse(localStorage.fav);t.includes(this.product.id)?this.isFavourite=!0:this.isFavourite=!1}else localStorage.fav=JSON.stringify([])},watch:{isFavourite:function(t){this.svg=t?"M255 490l-36-36C87 337 0 258 0 161 0 82 61 20 140 20c44 0 87 21 115 54 28-33 71-54 115-54 79 0 140 62 140 141 0 97-87 176-219 293l-36 36z":"M256 456c-7 0-14-3-20-8l-58-50c-52-44-96-82-127-119-35-42-51-82-51-125 0-42 14-81 41-109C67 16 103 0 143 0c30 0 57 9 80 28 13 9 23 20 33 34 10-14 21-25 33-34 23-19 50-28 80-28 40 0 76 16 102 45 27 28 41 67 41 109 0 43-16 83-51 125-31 37-75 75-127 119l-58 50c-6 5-13 8-20 8zM143 30c-31 0-60 12-80 35-21 23-33 54-33 89 0 36 14 69 44 105 29 36 73 73 123 116l59 51 59-51c50-43 94-80 123-116 30-36 44-69 44-105 0-35-12-66-33-89-20-23-49-35-80-35-23 0-44 7-62 21-17 13-28 29-35 41-3 5-9 9-16 9s-13-4-16-9c-7-12-18-28-35-41a99 99 0 0 0-62-21zm0 0"}}}),l=o,u=(r("7cd1"),r("2877")),p=Object(u["a"])(l,c,n,!1,null,null,null),d=p.exports,f={components:{Product:d},data:function(){return{products:[],productsOrig:[],sellers:[],message:"Hello Vue!",categ:"",loadSalers:!1,beginPrice:0,endPrice:0,showFav:!1,typeSort:"price",directionSort:"down"}},mounted:function(){var t=this;fetch("https://avito.dump.academy/products").then(function(t){return t.json()}).then(function(e){t.products=e.data,t.productsOrig=e.data,t.beginPrice=t.getMinPrice(t.products),t.endPrice=t.getMaxPrice(t.products)}),fetch("https://avito.dump.academy/sellers").then(function(t){return t.json()}).then(function(e){t.sellers=e.data,t.loadSalers=!0})},methods:{getMaxPrice:function(t){var e=t.filter(function(t){return t.price}),r=0;return e.forEach(function(t){t["price"]>r&&(r=t["price"])}),r},getMinPrice:function(t){var e=t.filter(function(t){return t.price});return e.reduce(function(t,e){return e.price<t?e.price:t},e[0].price)},changeCateg:function(){var t=this,e=this.products.filter(function(e){return!t.categ||e.category==t.categ});this.beginPrice=this.getMinPrice(e),this.endPrice=this.getMaxPrice(e)},findSalers:function(t){return this.sellers.find(function(e){return e.id==t})}},computed:{productFiltered:{get:function(){var t=this;return this.products.filter(function(e){return!t.categ||e.category==t.categ}).filter(function(e){return!e.price||Number(e.price)>=t.beginPrice&&Number(e.price)<=t.endPrice}).sort(function(e,r){if("rating"==t.typeSort){var i=t.findSalers(e.relationships.seller).rating,s=t.findSalers(r.relationships.seller).rating;return"up"==t.directionSort?i>s?1:-1:i<s?1:-1}if("price"==t.typeSort){var a=e.price,c=r.price;return"up"==t.directionSort?a>c?1:-1:a<c?1:-1}})}},set:function(t){this.products=t}},watch:{showFav:function(t,e){var r=this;if(this.showFav){var i=JSON.parse(localStorage.fav),s=[];i.forEach(function(t){var e=r.productsOrig.find(function(e){return e.id==t});s.push(e)}),this.products=s}else this.products=this.productsOrig}}},v=f,_=(r("5c0b"),Object(u["a"])(v,s,a,!1,null,null,null)),h=_.exports,g=r("498a"),b=r("b1fc"),m=r("44d4"),C=r("3d31");r("f9e3");i["a"].use(g["a"]),i["a"].use(b["a"]),i["a"].use(m["a"]),i["a"].use(C["a"]),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var i=r("5e27"),s=r.n(i);s.a},"5e27":function(t,e,r){},"7cd1":function(t,e,r){"use strict";var i=r("eed7"),s=r.n(i);s.a},eed7:function(t,e,r){}});
//# sourceMappingURL=app.1bddf94f.js.map