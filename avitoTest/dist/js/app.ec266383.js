(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)n=o[d],i[n]&&p.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],s=!0,o=1;o<r.length;o++){var c=r[o];0!==i[c]&&(s=!1)}s&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var s={},i={app:0},a=[];function n(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=s,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0596":function(t,e,r){},"114c":function(t,e,r){},2530:function(t,e,r){t.exports=r.p+"img/rubbish-bin.77dbda87.svg"},"2cf1":function(t,e,r){},"42f8":function(t,e,r){"use strict";var s=r("114c"),i=r.n(s);i.a},5452:function(t,e,r){"use strict";var s=r("0596"),i=r.n(s);i.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var s=r("2b0e"),i=r("498a"),a=r("b1fc"),n=r("44d4"),o=r("3d31"),c=r("a7e2"),l=r("b519"),u=r("7049"),d=r("59ca"),p=r.n(d),m=r("7bb1"),h=r("8c4f"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"95vw",height:"80vh"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner"}})],1):r("main",[r("Filters",{on:{changeKateg:t.changeCateg,changePrice:t.changePrice,changeCartItems:t.changeCartItems}}),r("Sorts",{on:{changeDirectionSort:t.changeDirectionSort,changeTypeSort:t.changeTypeSort}}),r("section",{staticClass:"pt-4 pb-4"},[r("b-container",{staticClass:"container"},[r("h1",[t._v("Товаров: "+t._s(t.productFiltered.length))])])],1),r("section",{staticClass:"products"},[r("div",{staticClass:"container products__wrapper"},t._l(t.collection,function(e){return r("ProductPreview",{key:e.id,attrs:{product:e,salers:t.findSalers(e.relationships.seller)}})}),1),r("div",{staticClass:"container"},[r("div",{staticClass:"btn-toolbar d-flex justify-content-center mb-5"},[r("div",{staticClass:"btn-group"},t._l(t.pagination.pages,function(e){return r("button",{key:e,staticClass:"btn btn-primary",on:{click:function(r){return r.preventDefault(),t.setPage(e)}}},[t._v(t._s(e))])}),0)])])])],1)},f=[],_=(r("7514"),r("ec99")),g=r.n(_),b=r("f5fe"),C=r.n(b),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-link",{staticClass:"product",attrs:{to:"product/"+t.product.id}},[r("b-card",{staticClass:"mb-4 product__card",staticStyle:{"max-width":"22rem"},attrs:{"img-src":t.product.pictures[0],"img-top":"",tag:"article"}},[r("b-card-text",{staticClass:"product__body"},[r("div",{staticClass:"product__col-photo"},[t._v(t._s(t.product.pictures.length))]),r("div",{staticClass:"product__title-wrap"},[r("h4",[t._v(t._s(t.product.title))])]),r("div",{staticClass:"product__price mt-3 mb-3"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.product.price,expression:"product.price"}]},[t._v(t._s(t._f("capitalize")(t.product.price)))]),r("b-button",{attrs:{href:"#",variant:t.isInCard?"danger":"primary"},on:{click:t.togleCard}},[t._v(t._s(t.btnText))])],1),r("div",{staticClass:"product__salers salers mt-1"},[r("div",{staticClass:"salers__name"},[t._v(t._s(t.salers.name))]),r("div",{staticClass:"salers__rating"},[t._v(t._s(t.salers.rating))])])])],1)],1)},x=[],P=(r("6762"),r("2fdb"),r("6b54"),r("a481"),{filters:{capitalize:function(t){if(t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},props:["product","salers"],data:function(){return{isInCard:!1,btnText:"В корзину"}},mounted:function(){this.$store.state.cartItems.includes(this.product)?(this.isInCard=!0,this.btnText="Убрать из корзины"):(this.isInCard=!1,this.btnText="В корзину")},methods:{togleCard:function(){this.isInCard?(this.btnText="В корзину",this.isInCard=!1,this.$store.commit("removeCartItem",this.product.id)):(this.btnText="Убрать из корзины",this.isInCard=!0,this.$store.commit("addCartItem",this.product.id))}}}),y=P,S=(r("a985"),r("2877")),I=Object(S["a"])(y,w,x,!1,null,null,null),k=I.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"header"},[s("div",{staticClass:"container"},[s("nav",{staticClass:"navbar navbar-light header__nav"},[s("router-link",{staticClass:"header__logo",attrs:{to:"/"}},[t._v("Авито")]),s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{exact:"","active-class":"active",to:"/"}},[s("div",{staticClass:"header__link"},[s("img",{staticClass:"mr-2 header__icon",attrs:{src:r("e3e6"),alt:""}}),t._v("\n              Главная\n            ")])])],1),s("li",{staticClass:"nav-item ="},[s("router-link",{staticClass:"nav-link",attrs:{exact:"","active-class":"active",to:"/admin"}},[s("div",{staticClass:"header__link"},[s("img",{staticClass:"mr-2 header__icon",attrs:{src:r("8b25"),alt:""}}),t._v("\n              Админка\n            ")])])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{exact:"","active-class":"active",to:"/cart"}},[s("div",{staticClass:"header__link"},[s("img",{staticClass:"mr-2 header__icon",attrs:{src:r("e9d6"),alt:""}}),t._v("\n              Корзина("+t._s(t.$store.state.cartItems.length)+")\n            ")])])],1)])],1),s("h1",{staticClass:"header__logo"})])])},O=[],j=(r("5452"),{}),q=Object(S["a"])(j,$,O,!1,null,null,null),N=q.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"options-block pt-4 pb-4"},[r("b-container",[r("div",{staticClass:"options-block__header pb-1"},[t._v("Отфильтровать по:")]),r("b-row",{staticClass:"options-block__options-wrap"},[r("b-col",{staticClass:"filter mb-3 mb-md-0",attrs:{lg:"3"}},[r("div",{staticClass:"filter__header"},[t._v("Категории:")]),r("div",{staticClass:"filter__controls"},[r("b-form-select",{staticClass:"filter__select",attrs:{name:"categoris"},on:{change:t.changeKateg},model:{value:t.categ,callback:function(e){t.categ=e},expression:"categ"}},[r("option",{attrs:{value:""}},[t._v("Все категории")]),r("option",{attrs:{value:"immovable"}},[t._v("Недвижимость")]),r("option",{attrs:{value:"cameras"}},[t._v("Камеры")]),r("option",{attrs:{value:"auto"}},[t._v("Автомобили")]),r("option",{attrs:{value:"laptops"}},[t._v("Ноутбуки")])])],1)]),r("b-col",{staticClass:"filter mb-3 mb-md-0",attrs:{lg:"4"}},[r("div",{staticClass:"filter__header"},[t._v("Цена:")]),r("div",{staticClass:"filter__controls filter-price"},[r("div",{staticClass:"filter-price__block"},[r("span",[t._v("c")]),r("b-form-input",{staticClass:"filter-price__input ml-2",attrs:{type:"number"},on:{input:t.changePrice},model:{value:t.beginPrice,callback:function(e){t.beginPrice=t._n("string"===typeof e?e.trim():e)},expression:"beginPrice"}})],1),r("div",{staticClass:"filter-price__block"},[r("span",[t._v("по")]),r("b-form-input",{staticClass:"filter-price__input ml-2",attrs:{type:"number"},on:{input:t.changePrice},model:{value:t.endPrice,callback:function(e){t.endPrice=t._n("string"===typeof e?e.trim():e)},expression:"endPrice"}})],1)])]),r("b-col",{staticClass:"filter mb-3 mb-md-0",attrs:{lg:"5"}},[r("div",{staticClass:"filter__header"},[t._v("Корзина:")]),r("div",{staticClass:"filter__controls"},[r("div",[t._v("Показать только корзину:")]),r("b-form-checkbox",{staticClass:"filter__chekbox ml-2",on:{change:t.changeCartItems},model:{value:t.showCartItems,callback:function(e){t.showCartItems=e},expression:"showCartItems"}})],1)])],1)],1)],1)},E=[];r("c5f6"),r("55dd"),r("ac6a");function L(t){var e=t.filter(function(t){return t.price}),r=0;return e.forEach(function(t){t.price>r&&(r=t.price)}),r}function F(t){var e=t.filter(function(t){return t.price});return e.length>0?e.reduce(function(t,e){return e.price<t?e.price:t},e[0].price):0}function D(t,e,r,s,i,a,n){return t.filter(function(t){return!e||t.category===e}).filter(function(t){return!t.price||Number(t.price)>=r&&Number(t.price)<=s}).sort(function(t,e){if("rating"===i){var r=a(t.relationships.seller).rating,s=a(e.relationships.seller).rating;return"up"===n?r>s?1:-1:r<s?1:-1}if("price"===i){var o=t.price,c=e.price;return"up"===n?o>c?1:-1:o<c?1:-1}})}var R={data:function(){return{categ:"",beginPrice:0,endPrice:0,showCartItems:!1,products:this.$store.state.products}},mounted:function(){this.beginPrice=F(this.products),this.endPrice=L(this.products);var t=this.beginPrice,e=this.endPrice;this.$emit("changePrice",{begprice:t,endPrice:e})},methods:{changeKateg:function(){var t=this;this.$emit("changeKateg",this.categ);var e=this.products.filter(function(e){return!t.categ||e.category==t.categ});this.beginPrice=F(e),this.endPrice=L(e),this.changePrice()},changePrice:function(){this.$emit("changePrice",{begprice:this.beginPrice,endPrice:this.endPrice})},changeCartItems:function(){var t=this;if(this.$emit("changeCartItems",!this.showCartItems),this.showCartItems){var e=this.products.filter(function(e){return!t.categ||e.category==t.categ});this.beginPrice=F(e),this.endPrice=L(e),this.changePrice()}else this.beginPrice=F(this.$store.state.cartItems),this.endPrice=L(this.$store.state.cartItems),this.changePrice()}}},A=R,M=Object(S["a"])(A,T,E,!1,null,null,null),J=M.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"options-block"},[r("b-container",{staticClass:"container options-block__wrap"},[r("div",{staticClass:"options-block__header pb-1"},[t._v("Отсортировать по:")]),r("div",{staticClass:"options-block__options-wrap"},[r("div",{staticClass:"filter mb-3 mb-md-0"},[r("div",{staticClass:"filter__controls"},[r("b-form-select",{staticClass:"filter__select mr-3",on:{change:t.changeTypeSort},model:{value:t.typeSort,callback:function(e){t.typeSort=e},expression:"typeSort"}},[r("option",{attrs:{value:"rating"}},[t._v("По популярности (рейтинг продавца)")]),r("option",{attrs:{value:"price"}},[t._v("По цене")])]),r("b-form-select",{staticClass:"filter__select",on:{change:t.changeDirectionSort},model:{value:t.directionSort,callback:function(e){t.directionSort=e},expression:"directionSort"}},[r("option",{attrs:{value:"down"}},[t._v("По убывания")]),r("option",{attrs:{value:"up"}},[t._v("По возрастанию")])])],1)])])])],1)},z=[],B={data:function(){return{typeSort:"price",directionSort:"down"}},methods:{changeDirectionSort:function(){this.$emit("changeDirectionSort",this.directionSort)},changeTypeSort:function(){this.$emit("changeTypeSort",this.typeSort)}}},K=B,Y=Object(S["a"])(K,H,z,!1,null,null,null),U=Y.exports,Q={components:{ProductPreview:k,Header:N,Filters:J,Sorts:U},data:function(){return{productsShowed:[],categ:"",beginPrice:0,endPrice:0,typeSort:"price",directionSort:"down",perPage:10,pagination:{}}},computed:{loading:function(){return this.$store.state.Common.loading},sellers:function(){return this.$store.state.sellers},cartItems:function(){return this.$store.state.cartItems},productFiltered:function(){return D(this.productsShowed,this.categ,this.beginPrice,this.endPrice,this.typeSort,this.findSalers,this.directionSort)},collection:function(){return this.paginate(this.productFiltered)}},watch:{productFiltered:function(){this.setPage(1)}},created:function(){this.productsShowed=this.$store.state.products},methods:{changePrice:function(t){var e=t.begprice,r=t.endPrice;this.beginPrice=e,this.endPrice=r},changeCateg:function(t){this.categ=t},changeDirectionSort:function(t){this.directionSort=t},changeTypeSort:function(t){this.typeSort=t},changeCartItems:function(t){this.productsShowed=t?this.cartItems:this.$store.state.products},findSalers:function(t){return this.sellers.find(function(e){return e.id==t})},setPage:function(t){this.pagination=this.paginator(this.productFiltered.length,t)},paginate:function(t){return g()(this.productFiltered,this.pagination.startIndex,this.pagination.endIndex+1)},paginator:function(t,e){var r=(e-1)*this.perPage,s=Math.min(r+this.perPage-1,t-1);return{currentPage:e,startIndex:r,endIndex:s,pages:C()(1,Math.ceil(t/this.perPage)+1)}}}},V=Q,W=Object(S["a"])(V,v,f,!1,null,null,null),X=W.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.loading?r("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"90vw",height:"80vh"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner"}})],1):r("div",{staticClass:"products__wrapper"},t._l(t.cartItems,function(e){return r("ProductPreview",{key:e.id,attrs:{product:e,salers:t.findSalers(e.relationships.seller)}})}),1)])},Z=[],tt={components:{ProductPreview:k},data:function(){return{}},methods:{findSalers:function(t){return this.sellers.find(function(e){return e.id==t})}},computed:{loading:function(){return this.$store.state.Common.loading},cartItems:function(){return this.$store.state.cartItems},sellers:function(){return this.$store.state.sellers}}},et=tt,rt=Object(S["a"])(et,G,Z,!1,null,null,null),st=rt.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"item-container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-5"},[r("hooper",{staticClass:"top-slider",attrs:{group:"group1"}},t._l(t.product.pictures,function(t,e){return r("slide",{key:e},[r("img",{attrs:{src:t,alt:""}})])}),1),r("hooper",{staticClass:"down-slider",attrs:{group:"group1",itemsToShow:3,centerMode:!0}},[t._l(t.product.pictures,function(t,e){return r("slide",{key:e},[r("img",{attrs:{src:t,alt:""}})])}),r("hooper-navigation",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"}),r("hooper-pagination",{attrs:{slot:"hooper-addons"},slot:"hooper-addons"})],2)],1),r("div",{staticClass:"col-md-7"},[r("div",{staticClass:"product-title"},[t._v(t._s(t.product.title))]),r("div",{staticClass:"product__salers salers product__salers-product mt-1 mb-3"},[r("div",{staticClass:"salers__name"},[t._v(t._s(t.salers.name))])]),r("div",{staticClass:"product-desc"},[t._v("\n          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Magnam, laborum quo. Debitis quae quasi impedit? Maiores dicta obcaecati alias dignissimos, at sapiente, officia architecto iusto illum, aliquid quidem commodi minima.\n          Repudiandae, possimus consequatur exercitationem corrupti asperiores porro laboriosam repellat quo. Corporis assumenda facilis doloremque officiis aperiam veritatis atque reprehenderit hic, sapiente voluptas! Id magni, aspernatur eum a ex totam perspiciatis.\n          Earum perspiciatis, illo dicta velit sint delectus, rem distinctio doloremque laudantium quo reprehenderit expedita odio ea deserunt ut accusantium cupiditate sunt. Ipsa doloribus deserunt sint itaque alias modi sunt quas.\n          Odio, magnam ipsam totam deserunt provident at illum dolores animi officiis consequuntur quidem neque magni incidunt temporibus non vero quibusdam commodi earum sequi quasi necessitatibus laborum iusto sit nostrum. Architecto?\n        ")]),r("hr"),r("div",{directives:[{name:"show",rawName:"v-show",value:t.product.price,expression:"product.price"}],staticClass:"product-price"},[t._v(t._s(t._f("capitalize")(t.product.price))+" р.")]),r("hr"),r("div",{staticClass:"btn-group cart"},[r("b-button",{attrs:{href:"#",variant:t.isInCard?"danger":"primary"},on:{click:t.togleCard}},[t._v(t._s(t.btnText))])],1)])])])])},at=[],nt=r("7e04"),ot=(r("955f"),{components:{Hooper:nt["a"],Slide:nt["e"],HooperProgress:nt["d"],HooperPagination:nt["c"],HooperNavigation:nt["b"]},data:function(){return{id:this.$route.params.id,isInCard:!1,btnText:"В корзину"}},methods:{togleCard:function(){this.isInCard?(this.btnText="В корзину",this.isInCard=!1,this.$store.commit("removeCartItem",this.product.id)):(this.btnText="Убрать из корзины",this.isInCard=!0,this.$store.commit("addCartItem",this.product.id))}},mounted:function(){this.$store.state.cartItems.includes(this.product)?(this.isInCard=!0,this.btnText="Убрать из корзины"):(this.isInCard=!1,this.btnText="В корзину")},computed:{product:function(){var t=this;return this.$store.state.products.find(function(e){return e.id===t.id})},salers:function(){var t=this;return this.$store.state.sellers.find(function(e){return e.id==t.product.relationships.seller})}},filters:{capitalize:function(t){if(t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}}),ct=ot,lt=(r("42f8"),Object(S["a"])(ct,it,at,!1,null,null,null)),ut=lt.exports,dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container admin-page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("ul",{staticClass:"admin-page__menu"},[r("li",{staticClass:"admin-page__menu-item"},[r("router-link",{staticClass:"admin-page__menu-link",attrs:{exact:"","active-class":"admin-page__menu-link--active",to:"/admin"}},[t._v("Все товары")])],1),r("li",{staticClass:"admin-page__menu-item"},[r("router-link",{staticClass:"admin-page__menu-link",attrs:{exact:"","active-class":"admin-page__menu-link--active",to:"/admin/new"}},[t._v("Новый товар")])],1)])]),r("div",{staticClass:"col-md-8"},[r("router-view")],1)])])},pt=[],mt=(r("b47e"),{}),ht=Object(S["a"])(mt,dt,pt,!1,null,null,null),vt=ht.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table AdminProductList"},[t._m(0),s("tbody",t._l(t.products,function(e,i){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.title))]),s("td",[t._v(t._s(e.price))]),s("td",[t._v(t._s(t.findSalers(e.relationships.seller).name))]),s("td",[s("router-link",{attrs:{to:"/admin/edit/"+e.id}},[s("img",{staticClass:"AdminProductList__icon",attrs:{src:r("66d5"),alt:""}})])],1),s("td",[s("img",{staticClass:"AdminProductList__icon",attrs:{src:r("2530"),alt:""},on:{click:function(r){return t.removeProduct(e.id,i)}}})])])}),0)])},_t=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("Название")]),r("th",{attrs:{scope:"col"}},[t._v("Цена")]),r("th",{attrs:{scope:"col"}},[t._v("Производитель")]),r("th",{attrs:{scope:"col"}}),r("th",{attrs:{scope:"col"}})])])}],gt={data:function(){return{products:this.$store.state.products,sellers:this.$store.state.sellers}},methods:{findSalers:function(t){return this.sellers.find(function(e){return e.id==t})},removeProduct:function(t,e){this.$store.dispatch("removeProduct",{productId:t,productIndex:e})}}},bt=gt,Ct=(r("b270"),Object(S["a"])(bt,ft,_t,!1,null,null,null)),wt=Ct.exports,xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ProductForm",{attrs:{model:t.model,isEditable:!0},on:{saveProduct:t.editProduct}})},Pt=[],yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"admin-product-form",on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("label",{staticClass:"admin-product-form__label input"},[r("span",{staticClass:"input__span"},[t._v("Название товара")]),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.model.title,expression:"model.title"}],staticClass:"input__input",class:{input__error:t.errors.has("name")},attrs:{name:"name",placeholder:"Название",type:"text"},domProps:{value:t.model.title},on:{input:function(e){e.target.composing||t.$set(t.model,"title",e.target.value)}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"small text-danger"},[t._v("Введите название")])]),r("label",{staticClass:"admin-product-form__label input"},[r("span",{staticClass:"input__span"},[t._v("Цена")]),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.number",value:t.model.price,expression:"model.price",modifiers:{number:!0}}],staticClass:"input__input",class:{input__error:t.errors.has("price")},attrs:{name:"price",placeholder:"Цена",type:"number"},domProps:{value:t.model.price},on:{input:function(e){e.target.composing||t.$set(t.model,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("price"),expression:"errors.has('price')"}],staticClass:"small text-danger"},[t._v("Введите цену")])]),r("label",{staticClass:"admin-product-form__label input"},[r("span",{staticClass:"input__span"},[t._v("Продавец:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.model.relationships.seller,expression:"model.relationships.seller"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input__error:t.errors.has("seller")},attrs:{name:"seller"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.model.relationships,"seller",e.target.multiple?r:r[0])}}},t._l(t.sellers,function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("seller"),expression:"errors.has('seller')"}],staticClass:"small text-danger"},[t._v("Выберете продавца")])])]),r("div",{staticClass:"col-md-6"},[r("label",{staticClass:"admin-product-form__label input"},[r("span",{staticClass:"input__span"},[t._v("Категория:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.model.category,expression:"model.category"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input__error:t.errors.has("kateg")},attrs:{name:"kateg"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.model,"category",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"immovable"}},[t._v("Недвижимость")]),r("option",{attrs:{value:"cameras"}},[t._v("Камеры")]),r("option",{attrs:{value:"auto"}},[t._v("Автомобили")]),r("option",{attrs:{value:"laptops"}},[t._v("Ноутбуки")])]),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("seller"),expression:"errors.has('seller')"}],staticClass:"small text-danger"},[t._v("Выберете продавца")])]),r("label",{staticClass:"admin-product-form__label input"},[r("span",{staticClass:"input__span"},[t._v("Картинка:")]),t._l(t.model.pictures,function(e,s){return r("div",{key:s,staticClass:"input__img-input-wrapper"},[r("div",{staticClass:"input__img-input"},[r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.model.pictures[s],expression:"model.pictures[index]"}],staticClass:"input__input",class:{input__error:t.errors.has("picture")},attrs:{name:"picture"+s,placeholder:"Картинка",type:"text"},domProps:{value:t.model.pictures[s]},on:{input:function(e){e.target.composing||t.$set(t.model.pictures,s,e.target.value)}}}),r("button",{staticClass:"btn btn-danger input__dell-btn",on:{click:function(e){return e.preventDefault(),t.removePicture(s)}}},[t._v("-")])]),r("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("picture"+s),expression:"errors.has(`picture${index}`)"}],staticClass:"small text-danger"},[t._v("Введите ссылку на картинку")])])}),r("button",{staticClass:"btn btn-success",on:{click:function(e){return e.preventDefault(),t.addPicture(e)}}},[t._v("+")])],2)])]),r("input",{staticClass:"btn btn-primary",attrs:{type:"submit"},domProps:{value:t.isEditable?"Изменить товар":"Добавить товар"}})])},St=[],It={props:["model","isEditable"],data:function(){return{sellers:this.$store.state.sellers,seller:""}},created:function(){},methods:{findSalers:function(t){return this.sellers.find(function(e){return e.id==t})},onSave:function(){var t=this;this.$validator.validateAll().then(function(e){if(!e)return console.log("почини");t.$emit("saveProduct",t.model)})},addPicture:function(){this.model.pictures.push("")},removePicture:function(t){this.model.pictures.splice(t,1)}}},kt=It,$t=(r("fbb8"),Object(S["a"])(kt,yt,St,!1,null,null,null)),Ot=$t.exports,jt={props:["id"],data:function(){return{model:{}}},components:{ProductForm:Ot},created:function(){var t=this;this.model=this.$store.state.products.find(function(e){return e.id===t.id})},methods:{editProduct:function(t){this.$store.dispatch("editProduct",t)}}},qt=jt,Nt=Object(S["a"])(qt,xt,Pt,!1,null,null,null),Tt=Nt.exports,Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ProductForm",{attrs:{model:t.model},on:{saveProduct:t.addProduct}})},Lt=[],Ft={data:function(){return{model:{title:"",price:"",relationships:{seller:"0"},pictures:[""],category:"immovable"}}},components:{ProductForm:Ot},methods:{addProduct:function(t){this.$store.dispatch("addProduct",t)}}},Dt=Ft,Rt=Object(S["a"])(Dt,Et,Lt,!1,null,null,null),At=Rt.exports,Mt={path:"/admin",component:vt,children:[{path:"",component:wt,name:"Products"},{path:"edit/:id",component:Tt,name:"Edit",props:!0},{path:"new",component:At,name:"New"}]};s["a"].use(h["a"]);var Jt=new h["a"]({mode:"history",routes:[Mt,{path:"/",component:X},{path:"/cart",component:st},{path:"/product/:id",component:ut},{path:"*",component:X}]}),Ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header"),t.loading?r("div",{staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"95vw",height:"80vh"}},[r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner"}})],1):r("router-view"),t._m(0)],1)},zt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",[r("div",{staticClass:"container d-flex justify-content-center"},[t._v("\n      Icons made by\n      "),r("a",{attrs:{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"}},[t._v("Freepik")]),t._v(" from\n      "),r("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[t._v("www.flaticon.com")]),t._v(" is licensed by\n      "),r("a",{attrs:{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank"}},[t._v("CC 3.0 BY")])])])}],Bt={components:{Header:N},computed:{loading:function(){return this.$store.state.Common.loading}}},Kt=Bt,Yt=(r("5c0b"),Object(S["a"])(Kt,Ht,zt,!1,null,null,null)),Ut=Yt.exports,Qt=(r("456d"),r("96cf"),r("3b8d")),Vt=(r("20d6"),r("2f62")),Wt={state:{loading:!1},mutations:{setLoading:function(t,e){t.loading=e}},getters:{}};s["a"].use(Vt["a"]);var Xt=new Vt["a"].Store({modules:{Common:Wt},state:{products:[],sellers:[],cartItems:[]},mutations:{setProducts:function(t,e){t.products=e},setSellers:function(t,e){t.sellers=e},setCartItems:function(t){localStorage.cartItems?JSON.parse(localStorage.cartItems).forEach(function(e){var r=t.products.find(function(t){return t.id===e});t.cartItems.push(r)}):localStorage.cartItems=JSON.stringify([])},addCartItem:function(t,e){var r=JSON.parse(localStorage.cartItems),s=t.products.find(function(t){return t.id===e});r.push(e),localStorage.cartItems=JSON.stringify(r),t.cartItems.push(s)},removeCartItem:function(t,e){var r=JSON.parse(localStorage.cartItems),s=r.findIndex(function(t){return t===e});r.splice(s,1),localStorage.cartItems=JSON.stringify(r),t.cartItems.splice(s,1)}},actions:{loadProducts:function(){var t=Object(Qt["a"])(regeneratorRuntime.mark(function t(e){var r,s,i,a,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setLoading",!0),t.next=4,p.a.database().ref("/products/").once("value");case 4:return s=t.sent,i=s.val(),a=Object.keys(i).map(function(t){return i[t]}),r("setProducts",a),t.next=10,p.a.database().ref("/sellers").once("value");case 10:return n=t.sent,t.next=13,n.val();case 13:o=t.sent,r("setSellers",o),r("setCartItems"),r("setLoading",!1);case 17:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),addProduct:function(){var t=Object(Qt["a"])(regeneratorRuntime.mark(function t(e,r){var s,i,a,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,i=e.state,s("setLoading",!0),a={title:r.title,price:r.price,relationships:{seller:r.relationships.seller},pictures:r.pictures,category:r.category},t.next=5,p.a.database().ref("products").push(a);case 5:return n=t.sent,o={},o["/products/".concat(n.key)]=Object.assign({id:n.key},a),t.next=10,p.a.database().ref().update(o);case 10:i.products.push(Object.assign({id:n.key},a)),s("setLoading",!1);case 12:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}(),editProduct:function(){var t=Object(Qt["a"])(regeneratorRuntime.mark(function t(e,r){var s,i,a,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,i=e.state,s("setLoading",!0),a={title:r.title,price:r.price,relationships:{seller:r.relationships.seller},pictures:r.pictures,category:r.category,id:r.id},n=i.products.findIndex(function(t){return t.id===a.id}),i.products[n]=a,o={},o["/products/".concat(r.id)]=Object.assign({},a),t.next=9,p.a.database().ref().update(o);case 9:s("setLoading",!1);case 10:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}(),removeProduct:function(){var t=Object(Qt["a"])(regeneratorRuntime.mark(function t(e,r){var s,i,a,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,i=e.state,a=r.productId,n=r.productIndex,s("setLoading",!0),i.products.splice(n,1),o={},o["/products/".concat(a)]=null,t.next=8,p.a.database().ref().update(o);case 8:s("setLoading",!1);case 9:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}()},getters:{}}),Gt=(r("f9e3"),r("66ce"),{apiKey:"AIzaSyBeNpQ39ItfYR-Xl3khSb_ntYeVTSWfN10",authDomain:"vue-store-d97e4.firebaseapp.com",databaseURL:"https://vue-store-d97e4.firebaseio.com",projectId:"vue-store-d97e4",storageBucket:"",messagingSenderId:"37910663680",appId:"1:37910663680:web:dfbc7b3897d5fd14"});p.a.initializeApp(Gt);var Zt={events:"blur|input"};s["a"].use(i["a"]),s["a"].use(a["a"]),s["a"].use(n["a"]),s["a"].use(o["a"]),s["a"].use(c["a"]),s["a"].use(l["a"]),s["a"].use(u["a"]),s["a"].use(m["a"],Zt),s["a"].config.productionTip=!1,new s["a"]({created:function(){this.$store.dispatch("loadProducts")},store:Xt,router:Jt,render:function(t){return t(Ut)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var s=r("5e27"),i=r.n(s);i.a},"5e27":function(t,e,r){},"66d5":function(t,e,r){t.exports=r.p+"img/edit.33ae1541.svg"},7905:function(t,e,r){},"7dfa":function(t,e,r){},"8b25":function(t,e,r){t.exports=r.p+"img/man-user.1b8be325.svg"},a985:function(t,e,r){"use strict";var s=r("7dfa"),i=r.n(s);i.a},b270:function(t,e,r){"use strict";var s=r("7905"),i=r.n(s);i.a},b47e:function(t,e,r){"use strict";var s=r("ebd4"),i=r.n(s);i.a},e3e6:function(t,e,r){t.exports=r.p+"img/home.569e8718.svg"},e9d6:function(t,e,r){t.exports=r.p+"img/shopping-cart.339fbabe.svg"},ebd4:function(t,e,r){},fbb8:function(t,e,r){"use strict";var s=r("2cf1"),i=r.n(s);i.a}});
//# sourceMappingURL=app.ec266383.js.map