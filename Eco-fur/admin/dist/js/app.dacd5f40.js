(function(t){function e(e){for(var r,n,l=e[0],s=e[1],c=e[2],d=0,v=[];d<l.length;d++)n=l[d],o[n]&&v.push(o[n][0]),o[n]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},o={app:0},i=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"20ad":function(t,e,a){"use strict";var r=a("6151"),o=a.n(r);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[a("v-toolbar-title",[a("router-link",{attrs:{tag:"div",to:"/"}},[t._v("Админ панель")])],1),a("v-spacer"),a("v-toolbar-items",t._l(t.links,function(e){return a("v-btn",{key:e.title,attrs:{to:e.url,flat:""}},[t._v(t._s(e.title))])}),1)],1),a("v-content",[a("router-view")],1)],1)},i=[],n={data:function(){return{links:[{title:"Главная",url:"/"},{title:"Войти",url:"/login"}]}}},l=n,s=a("2877"),c=Object(s["a"])(l,o,i,!1,null,null,null),u=c.exports,d=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Форма входа")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.emailRules,required:"","prepend-icon":"email",name:"login",label:"Login",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{rules:[function(t){return!!t||"Item is required"}],required:"",id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:!t.valid,color:"primary"},on:{click:t.onSubmit}},[t._v("Войти")])],1)],1)],1)],1)],1)},f=[],p=(a("3022"),{data:function(){return{valid:!1,email:"",password:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}]}},methods:{onSubmit:function(){if(this.$refs.form.validate()){var t={email:this.email,password:this.password};console.log(t)}}}}),m=p,h=Object(s["a"])(m,v,f,!1,null,null,null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tovarGRoup,function(e,r){return a("v-flex",{key:r,attrs:{xs12:"",sm6:"",lg3:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(e))])])]),a("v-card-actions",[a("v-btn",{attrs:{to:{name:"GroupItem",params:{group:r,name:e}},flat:"",color:"orange"}},[t._v("Перейти")])],1)],1)],1)}),1)],1)},x=[],w=a("8aa5"),y={data:function(){return{tovarGRoup:{}}},created:function(){var t=this;w["database"]().ref("tovarGroup").once("value").then(function(e){t.tovarGRoup=e.val()})}},k=y,_=Object(s["a"])(k,b,x,!1,null,null,null),j=_.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("h1",[t._v(t._s(t.name))])]),a("v-layout",{attrs:{row:"",wrap:"","align-start":"","justify-start":"","fill-height":""}},t._l(t.tovarList,function(e,r){return a("v-flex",{key:r,attrs:{xs12:"",sm6:"",lg3:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(e.title))])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"orange"},on:{click:function(a){return t.dellTovar(r,e.roads)}}},[t._v("Удалить")]),a("uppdateTovar",{attrs:{id:r},on:{reload:t.reload}})],1)],1)],1)}),1),a("v-layout",{attrs:{row:"",wrap:""}},[a("addTovar",{on:{reload:t.reload}})],1)],1)},S=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"success",attrs:{slot:"activator"},slot:"activator"},[t._v("Добаввить товар")]),a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{"xs-12":""}},[a("v-card-title",[a("h1",[t._v("Добавление товара")])])],1)],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):a("v-layout",[a("v-flex",{attrs:{"xs-12":""}},[a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Цена",required:""},model:{value:t.priceNew,callback:function(e){t.priceNew=e},expression:"priceNew"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Старая цена(можно оставить пустым)"},model:{value:t.priceOld,callback:function(e){t.priceOld=e},expression:"priceOld"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-btn",{attrs:{color:"warning"},on:{click:t.clockLoadImg}},[a("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("загрузить картинки\n                    ")],1),a("input",{ref:"inputPhoto",staticStyle:{display:"none"},attrs:{type:"file",name:"photo",id:"photo",accept:".jpg",multiple:""},on:{change:t.loadImg}})],1)],1)],1)],1),a("v-container",{attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-start":"","justify-start":"","fill-height":""}},t._l(t.imageSrc,function(t){return a("v-flex",{key:t,attrs:{xs12:"",md2:""}},[a("img",{attrs:{src:t,alt:""}})])}),1)],1),a("h1",[t._v("Описание")]),a("quill-editor",{ref:"myTextEditor",model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!t.dialog}}},[t._v("ОТменить")]),a("v-btn",{attrs:{color:"success"},on:{click:t.addTovar}},[t._v("Добавит")])],1)],1)],1)],1)],1)],1)},T=[],G=(a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),$=(a("4917"),a("7618")),N=a("4be7"),E=(a("5118"),{data:function(){return{loading:!1,dialog:!1,valid:!1,tovarGroup:this.$route.params.group,title:"",priceNew:"",priceOld:"",content:"",filesMas:[],imageSrc:[]}},methods:{clockLoadImg:function(){this.$refs.inputPhoto.click()},loadImg:function(t){var e=this,a=t.target.files;this.filesMas=[],this.imageSrc=[];for(var r,o=function(t,a){if(console.log(a),!a.type.match("image/jpeg"))return alert("Картинкт должна быть в формате .jpg"),{v:void 0};e.filesMas.push(a);var r=new FileReader;r.onload=function(a){return function(a){e.$set(e.imageSrc,t,a.target.result)}}(),r.readAsDataURL(a)},i=0;r=a[i];i++){var n=o(i,r);if("object"===Object($["a"])(n))return n.v}},addTovar:function(){var t=Object(G["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()||null==this.filesMas){t.next=2;break}return t.delegateYield(regeneratorRuntime.mark(function t(){var a,r,o,i,n,l,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a={title:e.title,priceNew:e.priceNew,priceOld:e.priceOld,deskr:e.content},r=[],t.next=5,w["database"]().ref("tovari").child(e.tovarGroup).push(a);case 5:for(o=t.sent,i=0,n=e.filesMas.length,l=e.tovarGroup,s=function(t){var a=e.filesMas[t].name.slice(e.filesMas[t].name.indexOf(".")),s=w["storage"]().ref("".concat(e.tovarGroup,"/").concat(o.key)).child("".concat(t).concat(a)).put(e.filesMas[t]);s.on(w["storage"].TaskEvent.STATE_CHANGED,function(t){},function(t){},function(){s.snapshot.ref.getDownloadURL().then(function(e){return i++,r[t]=e,new N["Promise"](function(t,e){i==n&&t()})}).then(function(){w["database"]().ref("tovari").child(l).child(o.key).update({roads:r}),e.loading=!1,0==e.loading&&(e.title="",e.priceNew="",e.priceOld="",e.content="",e.filesMas=null,e.imageSrc=[],e.$emit("reload"),e.dialog=!1)})})},c=0;c<e.filesMas.length;c++)s(c);case 11:case"end":return t.stop()}},t)})(),"t0",2);case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),I=E,R=(a("62c1"),Object(s["a"])(I,M,T,!1,null,"c44a363a",null)),L=R.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"success",attrs:{slot:"activator"},slot:"activator"},[t._v("Изменить товар")]),a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{"xs-12":""}},[a("v-card-title",[a("h1",[t._v("Добавление товара")])])],1)],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):a("v-layout",[a("v-flex",{attrs:{"xs-12":""}},[a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Цена",required:""},model:{value:t.priceNew,callback:function(e){t.priceNew=e},expression:"priceNew"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{label:"Старая цена(можно оставить пустым)"},model:{value:t.priceOld,callback:function(e){t.priceOld=e},expression:"priceOld"}})],1),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-btn",{attrs:{color:"warning"},on:{click:t.clickLoadImg}},[a("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("загрузить другие картинки\n                    ")],1),a("input",{ref:"inputPhoto",staticStyle:{display:"none"},attrs:{type:"file",name:"photo",id:"photo",accept:".jpg",multiple:""},on:{change:t.loadImg}})],1)],1)],1)],1),a("v-container",{attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-start":"","justify-start":"","fill-height":""}},t._l(t.imageSrc,function(t){return a("v-flex",{key:t,attrs:{xs12:"",md2:""}},[a("img",{attrs:{src:t,alt:""}})])}),1)],1),a("h1",[t._v("Описание")]),a("quill-editor",{ref:"myTextEditor",model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:t.cancel}},[t._v("ОТменить")]),a("v-btn",{attrs:{color:"success"},on:{click:t.changeTovar}},[t._v("Сохранить изменения")])],1)],1)],1)],1)],1)],1)},q=[],D={props:["id"],data:function(){return{loading:!1,dialog:!1,valid:!1,title:"",priceNew:"",priceOld:"",content:"",filesMas:[],imageSrc:[],imageSrcFromFb:[],tovarGroup:this.$route.params.group}},watch:{dialog:function(){var t=this;this.filesMas=[],this.imageSrc=[],w["database"]().ref("tovari").child(this.tovarGroup).child(this.id).once("value").then(function(e){t.content=e.val().deskr,t.title=e.val().title,t.priceNew=e.val().priceNew,t.priceOld=e.val().priceOld,t.imageSrcFromFb=e.val().roads})}},created:function(){},methods:{clickLoadImg:function(){this.$refs.inputPhoto.click()},changeTovar:function(){var t=this;if(this.$refs.form.validate()){var e={title:this.title,priceNew:this.priceNew,priceOld:this.priceOld,deskr:this.content};if(w["database"]().ref("tovari").child(this.tovarGroup).child(this.id).update(e).then(function(t){console.log(" ок")}),this.filesMas.length>0){var a=function(e,a){for(var r=w["storage"]().ref(),o=a.length,i=0;i<o;i++){var n=r.child("".concat(t.tovarGroup,"/").concat(e,"/").concat(i,".jpg"));n.delete().then(function(){console.log("Топчик")}).catch(function(t){console.log(t)})}},r=function(){var e=[];t.loading=!0;for(var a=0,r=t.filesMas.length,o=t.tovarGroup,i=function(i){var n=t.filesMas[i].name.slice(t.filesMas[i].name.indexOf(".")),l=w["storage"]().ref("".concat(t.tovarGroup,"/").concat(t.id)).child("".concat(i).concat(n)).put(t.filesMas[i]);l.on(w["storage"].TaskEvent.STATE_CHANGED,function(t){},function(t){},function(){l.snapshot.ref.getDownloadURL().then(function(t){return a++,e[i]=t,new Promise(function(t,e){a==r&&t()})}).then(function(){w["database"]().ref("tovari").child(o).child(t.id).update({roads:e}),t.loading=!1,0==t.loading&&(t.$emit("reload"),t.dialog=!1)})})},n=0;n<t.filesMas.length;n++)i(n)};a(this.id,this.imageSrcFromFb),r()}else this.$emit("reload"),this.dialog=!1}},cancel:function(){this.dialog=!1,this.filesMas=[],this.imageSrc=[]},loadImg:function(t){var e=this,a=t.target.files;this.filesMas=[],this.imageSrc=[];for(var r,o=function(t,a){if(console.log(a),!a.type.match("image/jpeg"))return alert("Картинкт должна быть в формате .jpg"),{v:void 0};e.filesMas.push(a);var r=new FileReader;r.onload=function(a){return function(a){e.$set(e.imageSrc,t,a.target.result)}}(),r.readAsDataURL(a)},i=0;r=a[i];i++){var n=o(i,r);if("object"===Object($["a"])(n))return n.v}}}},C=D,F=(a("20ad"),Object(s["a"])(C,P,q,!1,null,null,null)),A=F.exports,z={props:["group","name"],data:function(){return{tovarList:{}}},components:{addTovar:L,uppdateTovar:A},created:function(){var t=this;w["database"]().ref("tovari").child(this.group).once("value").then(function(e){t.tovarList=e.val()})},methods:{dellTovar:function(t,e){var a=w["storage"]().ref(),r=e.length;w["database"]().ref("tovari").child(this.group).child(t).remove();for(var o=0;o<r;o++){var i=a.child("".concat(this.group,"/").concat(t,"/").concat(o,".jpg"));i.delete().then(function(){console.log("Топчик")}).catch(function(t){console.log(t)})}this.reload()},reload:function(){var t=this;w["database"]().ref("tovari").child(this.group).once("value").then(function(e){t.tovarList=e.val()})}}},U=z,H=Object(s["a"])(U,O,S,!1,null,null,null),B=H.exports;r["default"].use(d["a"]);var J=new d["a"]({mode:"history",base:"/",routes:[{name:"Home",path:"",component:j,props:!0},{name:"Login",path:"/login",component:g},{name:"GroupItem",path:"/GroupItem/:group",component:B,props:!0}]}),K=a("2f62");r["default"].use(K["a"]);var V=new K["a"].Store({state:{},mutations:{},actions:{}}),W=a("ce5b"),X=a.n(W),Y=(a("bf40"),a("953d")),Q=a.n(Y);a("a753"),a("8096"),a("14e1");r["default"].use(Q.a,{modules:{toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}]]}}),r["default"].use(X.a),r["default"].config.productionTip=!1,new r["default"]({router:J,store:V,created:function(){var t={apiKey:"AIzaSyDs8Wqxf5K5eVnkP5XB_FtzeekD0D2MmMo",authDomain:"my-project-1501683622618.firebaseapp.com",databaseURL:"https://my-project-1501683622618.firebaseio.com",projectId:"my-project-1501683622618",storageBucket:"my-project-1501683622618.appspot.com",messagingSenderId:"1032386855643",appId:"1:1032386855643:web:2830c5d4de06b9ff"};w["initializeApp"](t)},render:function(t){return t(u)}}).$mount("#app")},6151:function(t,e,a){},"62c1":function(t,e,a){"use strict";var r=a("8441"),o=a.n(r);o.a},8441:function(t,e,a){}});
//# sourceMappingURL=app.dacd5f40.js.map